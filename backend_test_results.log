
ğŸ” TESTING OPPORTUNITY LINKS, VALUES, AND DATES

ğŸ” Testing User Registration...
âœ… Passed - Status: 200

ğŸ” Testing Get Opportunities (filters: {})...
âœ… Passed - Status: 200
Free tier user can see 6 opportunities
âŒ Expected 4 opportunities for free tier, got 6

ğŸ” Testing Upgrade to pro...
âœ… Passed - Status: 200

ğŸ” Testing Get Opportunities (filters: {})...
âœ… Passed - Status: 200
Pro tier user can see 9 opportunities
âŒ Expected 6 opportunities for pro tier, got 9
âŒ Opportunity not found: Royal Navy Radar Systems
âŒ Opportunity not found: Artificial Intelligence Research
âŒ Opportunity not found: Cybersecurity Framework
âŒ Opportunity not found: Military Infrastructure
âŒ Opportunity not found: BAE Systems Composite Materials
âŒ Opportunity not found: Leonardo Communications

âŒ Not all opportunities found. Found 0 out of 6
âŒ Invalid link format: https://www.gov.uk/government/publications/competition-defence-innovation-loans
âŒ Invalid link format: https://www.gov.uk/government/publications/competitioninnovation-in-support-of-operations-phase-2-cycle-5
âŒ Invalid link format: https://www.gov.uk/government/news/dasa-innovation-funding-delivers-nearly-1-billion-boost-to-uk-economy
âŒ Invalid link format: https://www.gov.uk/government/news/fast-times-fast-tech-dasa-launches-new-phase-of-fast-paced-themed-competition
âŒ Invalid link format: https://www.gov.uk/government/collections/apply-for-funding
âŒ Invalid link format: https://www.gov.uk/government/news/dtep-funding-for-sci-the-cheri-on-the-cake
âŒ Invalid link format: https://example.com/test
âŒ Invalid link format: https://example.com/test
âŒ Invalid link format: https://example.com/test
âš ï¸ Closing date outside 30-90 day range: 29 days for Test Opportunity 140602
âš ï¸ Closing date outside 30-90 day range: 29 days for Test Opportunity 140812
âš ï¸ Closing date outside 30-90 day range: 29 days for Test Opportunity 141402
âœ… All closing dates are in the future

ğŸ” TESTING FREE TIER USER JOURNEY

ğŸ” Testing User Registration...
âœ… Passed - Status: 200
âœ… Successfully registered a free tier user

ğŸ” Testing Get Current User...
âœ… Passed - Status: 200
âœ… User is correctly on free tier

ğŸ” Testing Get Opportunities (filters: {})...
âœ… Passed - Status: 200
âš ï¸ No delayed Pro opportunities found, but this might be expected

ğŸ” Testing Refresh Live Data...
âŒ Failed - Expected 200, got 403
Response: {'detail': 'Data refresh requires Pro or Enterprise subscription'}
âœ… Correctly prevented free tier user from refreshing live data

ğŸ” Testing Get Dashboard Stats...
âœ… Passed - Status: 200
âœ… Dashboard stats for free tier: 6 opportunities

ğŸ“Š Free Tier Tests passed: 4/5

ğŸ” TESTING PRO TIER USER JOURNEY

ğŸ” Testing User Registration...
âœ… Passed - Status: 200

ğŸ” Testing Upgrade to pro...
âœ… Passed - Status: 200
âœ… Successfully upgraded to Pro tier

ğŸ” Testing Get Current User...
âœ… Passed - Status: 200
âœ… User is correctly on Pro tier

ğŸ” Testing Get Opportunities (filters: {})...
âœ… Passed - Status: 200
âœ… Pro opportunities are not delayed for Pro users

ğŸ” Testing Get Opportunities (filters: {'tech_area': 'Cybersecurity'})...
âœ… Passed - Status: 200
âœ… Advanced filtering works for Pro users: found 0 opportunities

ğŸ” Testing Refresh Live Data...
âœ… Passed - Status: 200
âœ… Pro tier user can refresh live data

ğŸ” Testing Get Data Sources...
âœ… Passed - Status: 200
âœ… Pro tier user can access data sources: 4 sources available

ğŸ” Testing Create Opportunity (tier: pro)...
âœ… Passed - Status: 200
âœ… Pro tier user created a Pro opportunity: 1fbe6728-6f76-4913-a8c5-8ee803986bbc

ğŸ” Testing Get Specific Opportunity (ID: 1fbe6728-6f76-4913-a8c5-8ee803986bbc)...
âœ… Passed - Status: 200

ğŸ“Š Pro Tier Tests passed: 9/9

ğŸ” TESTING UK DEFENCE PROCUREMENT GUIDE ACCESS

ğŸ” Testing User Registration...
âœ… Passed - Status: 200
âœ… Successfully registered a free tier user for guide testing

ğŸ” Testing Get Current User...
âœ… Passed - Status: 200
âœ… User is correctly on free tier
âœ… Free user would see locked content with upgrade prompt (verified in UI test)

ğŸ” Testing User Registration...
âœ… Passed - Status: 200

ğŸ” Testing Upgrade to pro...
âœ… Passed - Status: 200
âœ… Successfully upgraded to Pro tier

ğŸ” Testing Get Current User...
âœ… Passed - Status: 200
âœ… User is correctly on Pro tier
âœ… Pro user would see full guide content (verified in UI test)

ğŸ” TESTING ACTIFY DEFENCE AGGREGATION SYSTEM

ğŸ” Testing User Registration...
âœ… Passed - Status: 200

ğŸ” Testing Upgrade to pro...
âœ… Passed - Status: 200
âœ… Successfully upgraded to Pro tier

ğŸ” Testing Refresh Live Data...
âœ… Passed - Status: 200
âœ… Actify Defence Aggregation completed successfully
âŒ Unexpected aggregation status: warning
âŒ No opportunities count in response
âŒ No sources information in response
âŒ Filtering was not applied
âŒ Deduplication was not applied
âŒ SME scoring was not applied

ğŸ” Testing Get Aggregation Stats...
âœ… Passed - Status: 200
âœ… Successfully retrieved aggregation statistics
âœ… Total opportunities in system: 10
âœ… Source breakdown available:
  - DASA: 6 opportunities
  - None: 4 opportunities
âœ… Technology areas breakdown available:
  - Space Technologies: 1 opportunities
âœ… SME relevance breakdown available:
  - High relevance: 0 opportunities
  - Medium relevance: 4 opportunities
  - Low relevance: 2 opportunities

ğŸ” Testing Get Opportunities (filters: {})...
âœ… Passed - Status: 200
âœ… Retrieved 10 opportunities after aggregation
âœ… Opportunities have source badges
âœ… Opportunities have technology area tags
âœ… Opportunities have SME relevance scores

ğŸ“Š OVERALL TEST RESULTS:
Opportunity Links & Values Tests: âœ… PASSED
Free Tier Tests: âŒ FAILED
Pro Tier Tests: âœ… PASSED
UK Defence Procurement Guide Tests: âœ… PASSED
Actify Defence Aggregation Tests: âœ… PASSED
